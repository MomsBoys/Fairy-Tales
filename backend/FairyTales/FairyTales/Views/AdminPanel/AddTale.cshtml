@using FairyTales.Entities
@using FairyTales.Models
@using Type = FairyTales.Entities.Type
@model FairyTale

@{
    ViewBag.Title = "Створення казки";
    Layout = "../Shared/_AdminPanelLayout.cshtml";
}

<div id="rev-content">
    <div id="rev-body">
        <div class="wrap">

            <h1>Додати казку</h1>

            @if (ViewBag.ResponseResult != null)
            {
                @Html.Partial("_OperationResult", (ResponseType)ViewBag.ResponseResult)
            }

        @using (Html.BeginForm("addtale", "adminpanel", FormMethod.Post))
        {
            <div id="post">
                <div id="post-body">
                    <div id="post-body-content" class="tale">

                        <div id="titlediv">
                            <div class="titlewrap">
                                @Html.TextBox("Name", "", new { placeHolder = "Введіть заголовок тут", id = "title" }) 
                            </div>
                            <div class="linkdiv">
                                <label for="article_link">Посилання</label>
                                @Html.TextBox("Path", "", new { placeHolder = "Для прикладу: tale_example", id = "article_link" })
                            </div>
                        </div><!-- #titlediv -->

                        <script>$(function() { $('#content').editable({ inlineMode: false, height: 500 }) });</script>
                        <div id="contentdiv" class="postarea">
                            <div id="content-wrap">
                                @Html.TextArea("TextPath", "", new { placeHolder = "Введіть будь ласка інформацію", @class = "editor-area", id = "content" })
                            </div><!-- #content-wrap -->
                        </div><!-- #contentdiv -->

                        <div id="dif_fields" class="image author">
                            <div>
                                <label class="labeltext" for="thumbnail">Основне зображення</label>
                                @Html.TextBox("CoverPath", "", new { placeHolder = "Вкажіть шлях до зображення", id = "thumbnail" })
                            </div><!-- #thumbnaildiv -->

                            <div>
                                <label class="audiotext" for="audio">Аудіо для читання</label>
                                @Html.TextBox("AudioPath", "", new { placeHolder = "Вкажіть шлях до аудіо", id = "audio" })
                            </div><!-- #authordiv -->
                        </div><!-- #dif_fields -->

                        <div id="seodiv" class="seo-fields">
                            <div class="inside">
                                <div class="seowrap">
                                    <div class="seo-input">
                                        <label for="article_excerpt">Короткий зміст</label>
                                        @Html.TextArea("ShortDescription", "", new { id = "article_excerpt" })
                                    </div>
                                </div>
                            </div><!-- .inside -->
                        </div><!-- #seodiv -->

                    </div><!-- #post-body-content -->

                    <div id="right-sidebar">
                        <div id="side-wrap">

                            <div id="submitdiv">
                                <h3 class="area-title">Опублікувати</h3>
                                <div class="inside">
                                    <div id="submitbox">
                                        <div class="pub-actions">
                                            <div id="publicate">
                                                <input type="submit" name="submit" id="publish" value="Опублікувати"/>
                                            </div><!-- #publicate -->
                                        </div>
                                    </div>
                                </div><!-- .inside -->
                            </div><!-- #submitdiv -->

                            <div class="panel-div">
                                <h3 class="area-title">Автор</h3>
                                <div class="inside">
                                    <div class="cat-id">
                                        @{
                                            var authorsList = new List<Author>(ViewBag.Authors).Select(author => new SelectListItem {Text = string.Format("{0} {1}", author.LastName, author.FirstName)}).ToList();
                                        }
                                        @Html.DropDownListFor(model => model.AuthorInput, authorsList)
                                    </div>
                                    <div class="desc">
                                        <p>Список авторів можна побачити перейшовши по адресу: <a href="/adminpanel/authors">Автори</a>.
                                        </p>
                                    </div>
                                </div><!-- .inside -->
                            </div><!-- #categorydiv -->
                            <div class="panel-div">
                                <h3 class="area-title">Категорія</h3>
                                <div class="inside">
                                    <div class="cat-id">
                                        @{
                                            var categoriesList = new List<Category>(ViewBag.Categories).Select(category => new SelectListItem { Text = category.Name }).ToList();
                                        }
                                        @Html.DropDownListFor(model => model.CategoryInput, categoriesList)
                                    </div>
                                    <div class="desc">
                                        <p>
                                            Список категорій можна побачити перейшовши по адресу: <a href="/adminpanel/categories">Категорії</a>.
                                        </p>
                                    </div>
                                </div><!-- .inside -->
                            </div>
                            <div class="panel-div">
                                <h3 class="area-title">Тип</h3>
                                <div class="inside">
                                    <div class="cat-id">
                                        @{
                                            var typesList = new List<Type>(ViewBag.Types).Select(type => new SelectListItem { Text = type.Name }).ToList();
                                        }
                                        @Html.DropDownListFor(model => model.TypeInput, typesList)
                                    </div>
                                </div><!-- .inside -->
                            </div>
                            <div class="panel-div">
                                <h3 class="area-title">Теги</h3>
                                <div class="inside">
                                    <div class="cat-id">
                                        @{
                                            var tagsList = new List<Tag>(ViewBag.Tags).Select(tag=> new SelectListItem { Text = tag.Name }).ToList();
                                        }
                                        @Html.DropDownListFor(model => model.SelectedTags, tagsList, new { multiple = "true", style = "height: 300px" })
                                    </div>
                                    <div class="desc">
                                        <p>
                                            Список тегів можна побачити перейшовши по адресу: <a href="/adminpanel/tags">Теги</a>.
                                        </p>
                                    </div>
                                </div><!-- .inside -->
                            </div>
                        </div><!-- #side-wrap -->

                    </div><!-- #right-sidebar -->
                </div><!-- #post-body -->
            </div><!-- #post -->
        }

        </div><!-- .wrap -->
    </div><!-- #rev-body -->
</div><!-- #rev-content -->
